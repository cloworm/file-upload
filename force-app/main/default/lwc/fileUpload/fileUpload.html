<template>
  <template if:true={hasInvalidConfig}>
    <lightning-card class="slds-text-align_center">
      <lightning-icon
        icon-name="utility:warning"
        alternative-text="error"
        variant="error"
        title="Error"
      ></lightning-icon>
      <p>
        Something is wrong with the configured&nbsp;
        <strong>Allowed File Extensions</strong>.
      </p>
      <p>
        Please consult the component documentation and make sure you are only
        using supported file extensions.
      </p>
    </lightning-card>
  </template>

  <template if:false={hasInvalidConfig}>
    <div
      class="box"
      ondragenter={handleDragEnter}
      ondragover={handleDragEnter}
      ondragleave={handleDragLeave}
      ondrop={handleDrop}
      data-id="dropzone"
    >
      <div class="slds-p-vertical_x-large slds-p-horizontal_large">
        <div class="slds-text-align_center">
          <lightning-icon
            class="browse-icon"
            icon-name={uploadIcon}
            alternative-text="Browse"
            title="Browse"
            size="large"
          ></lightning-icon>
        </div>
        <p
          class="slds-text-color_weak slds-text-align_center slds-p-top_medium"
        >
          Drag and drop or&nbsp;
          <label>
            <input
              type="file"
              style="display: none"
              onchange={handleInputChange}
              accept={acceptedMimeTypes}
              name="upload"
              multiple
            />
            <a class="browse-button">browse</a>
          </label>
        </p>

        <p class="text-light slds-text-body_small slds-text-align_center">
          Accepts: {allowedExtensions}
        </p>
      </div>
    </div>

    <div if:true={hasFiles} class="slds-p-top_large">
      <h2 class="slds-text-color_weak slds-text-title_bold slds-p-bottom_large">
        Uploaded Files
      </h2>

      <template for:each={files} for:item="file">
        <c-file-upload-tile file={file} key={file.id}></c-file-upload-tile>
      </template>
    </div>

    <c-file-grid
      if:true={showGrid}
      record-id={recordId}
      allow-delete={allowDelete}
    ></c-file-grid>
  </template>
</template>
